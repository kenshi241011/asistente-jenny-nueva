<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA:Jelo</title>
    <link rel="icon" href="favicon .ico" type="image/x-icon">
    
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pizzip/3.1.7/pizzip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docxtemplater/3.47.1/docxtemplater.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pptxgenjs/3.12.0/pptxgen.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900">

    <div id="login-screen" class="w-full h-screen flex items-center justify-center p-4 bg-gray-900">
        <div class="text-center max-w-md w-full bg-gray-800/50 backdrop-blur-xl p-8 rounded-2xl shadow-lg border border-gray-700">
             <div class="w-24 h-24 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center mb-6 mx-auto">
                <svg class="w-12 h-12 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.75L13.2625 8.2375L18.75 9.5L13.2625 10.7625L12 16.25L10.7375 10.7625L5.25 9.5L10.7375 8.2375L12 2.75Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </div>
            <h1 class="text-4xl font-bold mb-2 text-white">Bienvenido a Jelo</h1>
            <p class="text-gray-400 mb-8">Tu asistente personal con historial de chat.</p>
            
            <div class="w-full space-y-4">
                <button id="login-button" class="bg-[#1877F2] hover:bg-[#166fe5] text-white font-bold py-3 px-6 rounded-lg flex items-center gap-3 mx-auto w-full justify-center disabled:opacity-75 disabled:cursor-wait">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"/></svg>
                    <span>Iniciar Sesión con Facebook</span>
                </button>
                
                <button id="google-login-button" class="bg-white hover:bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg flex items-center gap-3 mx-auto w-full justify-center disabled:opacity-75 disabled:cursor-wait border border-gray-300">
                    <svg class="w-5 h-5" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/>
                        <path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"/>
                        <path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.223 0-9.657-3.657-11.303-8H6.306C9.656 39.663 16.318 44 24 44z"/>
                        <path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C44.591 35.013 46 30.023 46 24c0-1.341-.138-2.65-.389-3.917z"/>
                    </svg>
                    <span id="google-login-button-text">Iniciar Sesión con Google</span>
                </button>
            </div>
            <p id="login-error" class="text-red-500 mt-4 h-5"></p>
        </div>
    </div>

    <div id="app-screen" class="w-full h-screen flex hidden relative">
        <div id="notification-toast" class="absolute top-5 left-1/2 -translate-x-1/2 bg-gray-700 text-white py-2 px-5 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 z-50"></div>
        <div id="sidebar-backdrop" class="fixed inset-0 bg-black/50 z-30 hidden sm:hidden"></div>

        <div id="history-sidebar" class="fixed sm:relative inset-y-0 left-0 w-64 p-4 flex flex-col z-40 transform -translate-x-full sm:translate-x-0 transition-transform duration-300 ease-in-out">
            <button id="new-chat-button" class="w-full text-left p-2 mb-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700">+ Nuevo Chat</button>
            <button id="temporal-chat-button" class="w-full text-left p-2 mb-2 bg-gray-700/60 text-gray-300 rounded-lg hover:bg-gray-700 flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="stroke-current"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-dasharray="2 2"></path></svg>
                <span>Chat temporal</span>
            </button>
            <h2 class="text-sm font-semibold text-gray-400 mb-2 px-2">Historial</h2>
            <div id="history-list" class="flex-grow overflow-y-auto"></div>
        </div>
           
        <div class="flex-1 flex flex-col">
            <header class="p-4 border-b border-gray-700 flex justify-between items-center">
                 <button id="menu-toggle" class="sm:hidden p-2 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
                 </button>
                 <h1 id="chat-title" class="text-lg sm:text-xl font-semibold text-white truncate">Jelo</h1>
                 <div id="user-profile" class="flex items-center gap-2 sm:gap-3">
                     <span id="user-name" class="font-medium text-gray-300 hidden sm:inline"></span>
                     <img id="user-photo" class="w-8 h-8 rounded-full" alt="Foto de perfil">
                     <button id="logout-button" class="text-sm text-gray-400 hover:underline hidden sm:inline">Salir</button>
                 </div>
            </header>

            <main class="flex-grow p-4 sm:p-6 overflow-y-auto" id="chat-container">
                <div id="welcome-screen" class="flex flex-col items-center justify-center h-full text-center">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center mb-4">
                        <svg class="w-8 h-8 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.75L13.2625 8.2375L18.75 9.5L13.2625 10.7625L12 16.25L10.7375 10.7625L5.25 9.5L10.7375 8.2375L12 2.75Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                    <h2 class="text-3xl font-bold text-white">¿Cómo puedo ayudarte hoy?</h2>
                </div>
                <div id="chat-history" class="space-y-6"></div>
            </main>

            <footer class="p-2 sm:p-4 bg-transparent">
                 <div id="status-indicator" class="text-gray-400 text-sm h-5 mb-2 text-center"></div>
                 <div class="flex items-center gap-2 bg-gray-800 rounded-2xl p-2 relative">
                    <label class="p-2 text-gray-400 hover:bg-gray-700 rounded-full transition-colors cursor-pointer flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                        <input type="file" id="file-upload-input" class="hidden">
                    </label>

                    <select id="model-selector" class="bg-gray-700 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2 cursor-pointer flex-shrink-0">
                        <option value="groq">Groq (Rápido)</option>
                        <option value="gemini">Gemini (Normal)</option>
                    </select>
                    
                    <input type="text" id="chat-input" placeholder="Escribe una pregunta..." class="flex-grow bg-transparent p-2 focus:outline-none text-white w-full min-w-0">
                    
                    <button id="send-chat-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold p-2 rounded-full flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </div>
            </footer>
        </div>
    </div>
    
    <div id="welcome-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-gray-800 p-8 rounded-2xl shadow-lg max-w-lg w-full text-white border border-gray-700">
            <h2 class="text-2xl font-bold mb-4">¡Bienvenido a Jelo!</h2>
            <div class="prose prose-invert text-gray-300">
                <p>Estoy aquí para ayudarte. Esto es lo que puedes hacer:</p>
                <ul>
                    <li><strong>Conversar conmigo:</strong> Pregúntame lo que quieras.</li>
                    <li><strong>Analizar Archivos:</strong> Sube documentos (.docx, .xlsx, .txt) y te daré un resumen.</li>
                </ul>
            </div>
            <button id="close-welcome-modal" class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">¡Entendido!</button>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>